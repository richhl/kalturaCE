propel:
  kuser:
    _attributes: { phpName: kuser }
    id:
    screen_name: varchar(20)
    full_name: varchar(40)
    email: varchar(50)
    sha1_password: varchar(40)
    salt: varchar(32)
    date_of_birth: bu_date
    country: varchar(2)
    state: varchar(16)
    city: varchar(30)
    zip: varchar(10)
    url_list: varchar(256)
    picture: varchar(48)
    icon: tinyint
    about_me: varchar(4096)
    tags: longvarchar
    tagline: varchar(256)
    network_highschool: varchar(30)
    network_college: varchar(30)
    network_other: varchar(30)
    mobile_num: varchar(16)
    mature_content: tinyint
    gender: tinyint
    registration_ip: integer
    registration_cookie: varchar(256)
    im_list: varchar(256)
    views :  { type: integer, default: 0 }
    fans :  { type: integer, default: 0 }
    entries:  { type: integer, default: 0 }
    storage_size:  { type: integer, default: 0 }
    produced_kshows:  { type: integer, default: 0 }
    status:integer
    created_at:
    updated_at:
    partner_id: { type: integer, default: 0 }
    display_in_search : tinyint
    search_text: varchar(4096)
    partner_data: varchar(4096)
    puser_id: varchar(64)
    admin_tags: longvarchar
    indexed_partner_data_int: integer
    indexed_partner_data_string: varchar(64)

    _indexes:
      screen_name_index: [screen_name]
      full_name_index: [full_name]
      network_college_index : [network_college]
      network_highschool_index : [network_highschool]
      entries_index: [entries]
      views_index: [views]
      display_in_search_index: [display_in_search]
      partner_indexed_partner_data_int: [partner_id, indexed_partner_data_int]
      partner_indexed_partner_data_string: [partner_id, indexed_partner_data_string]
       

  kshow:
    _attributes: { phpName: kshow }
    id: { type: varchar(10), required: true, primaryKey: true }
    producer_id: { type: integer, foreignTable: kuser, foreignReference: id }
    episode_id: varchar(10)
    name: varchar(60)
    subdomain: varchar(30)
    description: longvarchar
    status: { type: integer, default: 0 }
    type: integer
    media_type: integer
    format_type : integer
    language: integer
    start_date: date
    end_date: date
    skin: longvarchar
    thumbnail: varchar(48)
    show_entry_id : varchar(10)
    intro_id : integer
    views: { type: integer, default: 0 }
    votes: { type: integer, default: 0 }
    comments: { type: integer, default: 0 }
    favorites: { type: integer, default: 0 }
    rank: { type: integer, default: 0 }
    entries: { type: integer, default: 0 }
    contributors: { type: integer, default: 0 }
    subscribers: { type: integer, default: 0 }
    number_of_updates: { type: integer, default: 0 }
 #   number_of_roughcuts: { type: integer, default: 0 }
    tags: longvarchar
    custom_data : longvarchar
    indexed_custom_data_1 : integer
    indexed_custom_data_2 : integer
    indexed_custom_data_3 : varchar(256)
    reoccurence : integer
    license_type : integer
    length_in_msecs: { type: integer, default: 0 }
    view_permissions : integer
    view_password: varchar(40)
    contrib_permissions: integer
    contrib_password: varchar(40)
    edit_permissions: integer
    edit_password: varchar(40)
    salt: varchar(32)
    created_at:
    updated_at:
    partner_id: { type: integer, default: 0 }
    display_in_search : tinyint
    subp_id: { type: integer, default: 0 }
    search_text: varchar(4096)
    permissions: varchar(1024)
    group_id: varchar(64)
    plays:  { type: integer, default: 0 }
    partner_data: varchar(4096)
    int_id: { type: integer, required: true, autoincrement: true }

    _indexes:
      views_index: [views]
      votes_index: [votes]
      created_at_index: [created_at]
      type_index: [type]
      indexed_custom_data_1_index: [indexed_custom_data_1]
      indexed_custom_data_2_index: [indexed_custom_data_2]
      indexed_custom_data_3_index: [indexed_custom_data_3]
      producer_id_index: [producer_id]
      display_in_search_index: [display_in_search]
      partner_group_index: [partner_id, group_id]


  entry:
    _attributes: { phpName: entry }
    id: { type: varchar(10), required: true, primaryKey: true }
    kshow_id: { type: varchar(10), foreignTable: kshow, foreignReference: id }
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    name: varchar(60)
    type: smallint
    media_type: smallint
    data: varchar(48)
    thumbnail: varchar(48)
    views:  { type: integer, default: 0 }
    votes:  { type: integer, default: 0 }
    comments:  { type: integer, default: 0 }
    favorites:  { type: integer, default: 0 }
    total_rank:  { type: integer, default: 0 }
    rank:  { type: integer, default: 0 }
    tags: longvarchar
    anonymous : tinyint
    status: integer
    source: smallint
    source_id : varchar(48)
    source_link: varchar(1024)
    license_type: smallint
    credit: varchar(1024)
    length_in_msecs:  { type: integer, default: 0 }
    created_at:
    updated_at:
    partner_id: { type: integer, default: 0 }
    display_in_search : tinyint
    subp_id: { type: integer, default: 0 }
    custom_data : longvarchar
    search_text: varchar(4096)
    screen_name: varchar(20)
    site_url: varchar(256)
    permissions: { type: integer, default: 1 }
    group_id: varchar(64)
    plays:  { type: integer, default: 0 }
    partner_data: varchar(4096)
    int_id: { type: integer, required: true, autoincrement: true }
    indexed_custom_data_1 : integer
    plays:  { type: integer, default: 0 }
    description: longvarchar
    media_date: timestamp
    admin_tags: longvarchar
    moderation_status: integer
    moderation_count: integer
    modified_at: timestamp
    puser_id: varchar(64)
       
    _indexes:
      kshow_rank_index: [kshow_id, rank]
      kshow_views_index: [kshow_id, views]
      kshow_votes_index: [kshow_id, votes]
      kshow_created_index: [kshow_id, created_at]
      views_index: [views]
      votes_index: [votes]
      display_in_search_index: [display_in_search]
      partner_group_index: [partner_id, group_id]
      partner_kuser_indexed_custom_data_index: [partner_id, kuser_id,indexed_custom_data_1] 
      partner_status_index:   [partner_id, status]   
      partner_moderation_status:   [partner_id, moderation_status]   
      partner_modified_at_index:   [partner_id, modified_at]


  kvote:
    _attributes: { phpName: kvote }
    id:
    kshow_id: { type: varchar(10), foreignTable: kshow, foreignReference: id }
    entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    kuser_id: { type: integer, foreignTable: kshow, foreignReference: id }
    rank:integer
    created_at:

    _indexes:
      kshow_index: [kshow_id]
      entry_user_index: [entry_id]


  comment:
    _attributes: { phpName: comment }
    id:
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    comment_type:integer
    subject_id:integer
    base_date:date
    reply_to:integer
    comment: varchar(256)
    created_at:

    _indexes:
      subject_created_index: [comment_type, subject_id, base_date, reply_to, created_at]


  flag:
    _attributes: { phpName: flag }
    id:
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    subject_type:integer
    subject_id:integer
    flag_type:integer
    other : varchar(60)
    comment: varchar(2048)
    created_at:

    _indexes:
      subject_created_index: [subject_type, subject_id, created_at]

  alert:
    _attributes: { phpName: alert }
    id:
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    alert_type: integer
    subject_id: integer
    rule_type: integer

    _indexes:
      kuser_index: [kuser_id]
      subject_index: [alert_type, subject_id]

  favorite:
    _attributes: { phpName: favorite }
    kuser_id : { type: integer, foreignTable: kuser, foreignReference: id }
    subject_type: integer
    subject_id: integer
    privacy: integer

    _indexes:
      kuser_index: [kuser_id]
      subject_index: [subject_type, subject_id]

  kshow_kuser:
    _attribute: { phpName : kshowKuserAlert }
    kshow_id : { type: varchar(10), foreignTable: kshow, foreignReference: id }
    kuser_id : { type: integer, foreignTable: kuser, foreignReference: id }
    subscription_type: integer
    alert_type : integer

    _indexes:
      kshow_index: [kshow_id]
      kuser_index: [kuser_id]
      subscription_index: [kshow_id, subscription_type]


  keyword:
    _attribute: { phpName : keyword }
    word : { primaryKey: true, type: varchar(30)}
    entity_id : integer
    entity_type : integer
    entity_columns : varchar(30)

    _indexes:
      word_index: [word]

  tagword_count:
    _attribute: { phpName : tagwordCount }
    tag : { primaryKey: true, type: varchar(30) }
    tag_count : integer

    _indexes:
      count_index: [tag_count]

  mail_job:
    _attribute: { phpName : mailJob }
    id :
    mail_type : smallint
    mail_priority : smallint
    recipient_name : varchar(64)
    recipient_email : varchar(64)
    recipient_id :  { type: integer, foreignTable: kuser, foreignReference: id }
    from_name : varchar(64)
    from_email : varchar(64)
    body_params : varchar(2048)
    subject_params : varchar(512)
    template_path : varchar(512)
    culture : tinyint
    status : tinyint
    created_at:
    campaign_id: integer
    min_send_date: timestamp
    processor_name: varchar(64)
    processor_location: varchar(64)
    processor_expiration: { type: timestamp } 
    execution_attempts: tinyint
    lock_version: integer
    partner_id: { type: integer, default: 0 }
    updated_at:
    
    _indexes:
      mail_job_index: [mail_priority, created_at]
      recipient_id_index: [recipient_id]
      campaign_id_index: [campaign_id]
      partner_id_index: [partner_id]      

  batch_job:
    _attribute: { phpName : batchJob }
    id :
    job_type : smallint
    job_sub_type : smallint
    data : varchar(4096)
    status : integer
    abort : tinyint
    check_again_timeout : integer
    progress : tinyint
    message : varchar(1024)
    description : varchar(1024)
    updates_count : smallint
    created_at :
    updated_at :
    entry_id: { type: varchar(10), default: '' }
    partner_id: { type: integer, default: 0 }
    subp_id: { type: integer, default: 0 }
    processor_name: varchar(64)
    processor_location: varchar(64)
    processor_expiration: { type: timestamp } 
    execution_attempts: tinyint
    lock_version: integer
    parent_job_id : integer

    _indexes:
      entry_id_index_id: [entry_id, id]
      partner_id_subp_id: [partner_id, subp_id]      

  blocked_email:
    _attributes: { phpName: blockedEmail }
    email: { primaryKey: true, type: varchar(40) }

  conversion:
    _attributes: { phpName: conversion }
    id:
    entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    in_file_name: varchar(128)
    in_file_ext: varchar(16)
    in_file_size: { type: integer }
    source: { type: integer }
    status: { type: integer }
    conversion_params : varchar(512)
    out_file_name: varchar(128)
    out_file_size: { type: integer }
    out_file_name_2: varchar(128)
    out_file_size_2: { type: integer }
    conversion_time: { type: integer }
    total_process_time: { type: integer }
    created_at:
    updated_at:

    _indexes:
      entry_id_index: [entry_id]

  flickr_token:
    _attributes: { phpName: flickrToken }
    kalt_token : { primaryKey: true, type: varchar(256) }
    frob: { type: varchar(64) }
    token: { type: varchar(64) }
    nsid: { type: varchar(64) }
    response: {type: varchar(512) }
    is_valid: { type: boolean, default: false }
    created_at:
    updated_at:

    _indexes:
      is_valid_index: [is_valid, kalt_token]


  puser_kuser:
    _attribute: { phpName : puserKuser }
    id:
    partner_id: integer
    puser_id: varchar(64)
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    puser_name: varchar(64)
    custom_data: varchar(1024)
    created_at:
    updated_at:
    context:  varchar(1024)
    subp_id: { type: integer, default: 0 }

    _indexes:
      partner_puser_index: [partner_id , puser_id]
      kuser_id_index: [kuser_id]

  puser_role:
    _attribute: { phpName : puserRole }
    id:
    kshow_id: { type: varchar(10), foreignTable: kshow, foreignReference: id }
    partner_id: { type: integer, foreignTable: puser_kuser, foreignReference: partner_id }
    puser_id: { type: varchar(64), foreignTable: puser_kuser, foreignReference: puser_id }
    role: integer
    created_at:
    updated_at:
    subp_id: { type: integer, default: 0 }

    _indexes:
      partner_puser_index: [partner_id , puser_id]
      kshow_id_index: [kshow_id]


  facebook_invite:
    _attribute: { phpName : facebookInvite }
    id:
    puser_id: varchar(64)
    invited_puser_id: varchar(64)
    status: smallint
    created_at:
    updated_at:

    _indexes:
      puser_id_index: [puser_id]
      invited_puser_id_index: [invited_puser_id]


  partner:
    _attribute: { phpName : partner }
    id:
    partner_name: varchar(256)
    partner_alias: varchar(64)
    url1: varchar(1024)
    url2: varchar(1024)
    secret: varchar(50)
    admin_secret: varchar(50)
    max_number_of_hits_per_day: { type: integer, default: -1 }
    appear_in_search: { type: integer, default: 2 }
    debug_level: { type: integer, default: 0}
    invalid_login_count: { type: integer, default: 0}
    created_at:
    updated_at:
    anonymous_kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    ks_max_expiry_in_seconds: { type: integer, default: 86400 }
    create_user_on_demand: { type: tinyint, default: 1 }
    prefix: varchar(32)
    admin_name: varchar(50)
    admin_email: varchar(50)
    description: varchar(1024)
    commercial_use: { type: tinyint, default: 0 }
    moderate_content: { type: tinyint, default: 0 }
    notify: { type: tinyint, default: 0 }
    custom_data : longvarchar
    service_config_id: varchar(64)
    status: { type: tinyint, default: 1 }
    content_categories: varchar(1024)
    type: { type: tinyint, default: 1 }
    phone: varchar(64)
    describe_yourself: varchar(64)
    adult_content: { type: tinyint, default: 0 }
    partner_package: { type: tinyint, default: 1 }
    usage_percent: { type: integer, default: 0 }
    storage_usage: { type: integer, default: 0 }
    eighty_percent_warning: integer
    usage_limit_warning: integer
    
    _indexes:
      partner_alias_index: [partner_alias]


  pr_news:
    _attribute: { phpName : prNews }
    id:
    pr_order: integer
    image_path: varchar(256)
    href: varchar(1024)
    text: varchar(1024)
    alt: varchar(256)
    created_at:
    updated_at:
    press_date: varchar(128)


  email_campaign:
    _attribute: { phpName : emailCampaign }
    id:
    criteria_id: smallint
    criteria_str: varchar(1024)
    criteria_params: varchar(1024)
    template_path: varchar(256)
    campaign_mgr_kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    send_count: integer
    open_count: integer
    click_count: integer
    status: integer
    created_at:
    updated_at:

    _indexes:
      campaign_mgr_kuser_id_index: [campaign_mgr_kuser_id]


  widget_log:
    _attribute: { phpName : widgetLog }
    id:
    kshow_id: varchar(10)
    entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    kmedia_type: integer
    widget_type: varchar(32)
    referer: varchar(1024)
    views: { type: integer, default: 0 }
    ip1: integer
    ip1_count: { type: integer, default: 0 }
    ip2: integer
    ip2_count: { type: integer, default: 0 }
    created_at:
    updated_at:
    plays: { type: integer, default: 0 }
    partner_id: { type: integer, default: 0 }
    subp_id: { type: integer, default: 0 }

    _indexes:
      referer_index: [referer]
      entry_id_kshow_id_index: [entry_id, kshow_id]
      partner_id_subp_id_index: [partner_id, subp_id]

  partnership:
    _attribute: { phpName : partnership }
    id:
    partnership_order: integer
    image_path: varchar(256)
    href: varchar(1024)
    text: varchar(1024)
    alt: varchar(256)
    created_at:
    updated_at:
    partnership_date: varchar(128)

    _indexes:
      partnership_order_index: [partnership_order]


  admin_kuser:
    _attributes: { phpName: adminKuser }
    id:
    screen_name: varchar(20)
    full_name: varchar(40)
    email: varchar(50)
    sha1_password: varchar(40)
    salt: varchar(32)
    picture: varchar(48)
    icon: tinyint
    created_at:
    updated_at:
    partner_id: { type: integer, foreignTable: partner, foreignReference: id }

    _indexes:
      screen_name_index: [screen_name]

  admin_permission:
    _attributes: { phpName: adminPermission }
    id:
    groups: varchar(512)
    admin_kuser_id: { type: integer, foreignTable: admin_kuser, foreignReference: id }


  notification:
    _attributes: { phpName: notification }
    id:
    partner_id: integer
    puser_id: varchar(64)
    type: smallint
    object_id: varchar(10)
    status: integer
    notification_data: varchar(4096)
    number_of_attempts: { type: smallint, default: 0 }
    created_at:
    updated_at:
    notification_result: varchar(256)
    object_type: type: smallint  
    processor_name: varchar(64)
    processor_location: varchar(64)
    processor_expiration: { type: timestamp }  
    execution_attempts: tinyint
    lock_version: integer
    
    _indexes:
      status_partner_id_index: [status, partner_id]

  moderation:
    _attributes: { phpName: moderation }
    id:
    partner_id: integer
    subp_id: integer
    object_id: varchar(10)
    object_type: smallint
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    puser_id: varchar(64)
    status: integer
    created_at:
    updated_at:
    comments: varchar(1024)
    group_id: varchar(64)
    puser_id: varchar(64)
    report_code: integer

    _indexes:
      partner_id_status_index: [partner_id, status]
      partner_id_group_id_status_index: [partner_id, group_id, status]
      object_index: [partner_id, status, object_id, object_type]

  moderation_flag:
    _attributes: { phpName: moderationFlag }
    id:
    partner_id: integer
    kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    object_type: smallint
    flagged_entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    flagged_kuser_id: { type: integer, foreignTable: kuser, foreignReference: id }
    status: integer
    created_at:
    updated_at:
    comments: varchar(1024)
    flag_type: integer

    _indexes:
      partner_id_status_index: [partner_id, status]
      entry_object_index: [partner_id, status, object_type, flagged_entry_id]
      entry_object_index: [partner_id, status, object_type, flagged_kuser_id]

  roughcut_entry:
    _attributes: { phpName: roughcutEntry }
    id:
    roughcut_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    roughcut_version: integer
    roughcut_kshow_id: { type: varchar(10), foreignTable: kshow, foreignReference: id }
    entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    partner_id: integer
    op_type: smallint
    created_at:
    updated_at:

    _indexes:
      partner_id_index: [partner_id ]
      entry_id_index: [entry_id ]
      roughcut_id_index: [roughcut_id]
      roughcut_kshow_id_index: [roughcut_kshow_id ]


  widget:
    _attributes: { phpName: widget }
    id: { type: varchar(32), required: true, primaryKey: true }
    int_id: { type: integer, required: true, autoincrement: true }
    source_widget_id: varchar(32)
    root_widget_id: varchar(32)
    partner_id: integer
    subp_id: integer
    kshow_id: { type: varchar(10), foreignTable: kshow, foreignReference: id }
    entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    ui_conf_id: { type: integer, foreignTable: ui_conf, foreignReference: id }
    custom_data: varchar(1024)
    security_type: smallint
    security_policy: smallint
    created_at:
    updated_at:
    partner_data: varchar(4096)

    _indexes:
      int_id_index: [int_id ]


  kwidget_log:
    _attribute: { phpName : widgetLog }
    id:
    widget_id:  { type: varchar(32), foreignTable: widget, foreignReference: id }
    source_widget_id: varchar(32)
    root_widget_id: varchar(32)
    kshow_id: { type: varchar(10), foreignTable: kshow, foreignReference: id }
    entry_id: { type: varchar(10), foreignTable: entry, foreignReference: id }
    ui_conf_id: { type: integer, foreignTable: ui_conf, foreignReference: id }
    referer: varchar(1024)
    views: { type: integer, default: 0 }
    ip1: integer
    ip1_count: { type: integer, default: 0 }
    ip2: integer
    ip2_count: { type: integer, default: 0 }
    created_at:
    updated_at:
    plays: { type: integer, default: 0 }
    partner_id: { type: integer, default: 0 }
    subp_id: { type: integer, default: 0 }

    _indexes:
      referer_index: [referer]
      entry_id_kshow_id_index: [entry_id, kshow_id]
      partner_id_subp_id_index: [partner_id, subp_id]


  ui_conf:
    _attributes: { phpName: uiConf }
    id:
    obj_type: smallint
    partner_id: integer
    subp_id: integer
    conf_file_path: varchar(128)
    name: varchar(128)
    width: varchar(10)
    height: varchar(10)
    html_params: varchar(256)
    swf_url: varchar(256)
    created_at:
    updated_at:
    conf_vars:  varchar(4096)
    use_cdn: tinyint
    tags: longvarchar
    custom_data : longvarchar  
    status:integer   
    description : varchar(4096)
    display_in_search : tinyint
    creation_mode: tinyint
    
    _indexes:
      partner_id_index: [partner_id]
      partner_id_creation_mode_index: [partner_id,creation_mode]
	
  partner_stats:
    _attribute: { phpName : partnerStats }
    partner_id: { type: integer, required: true, primaryKey: true }
#    partner_id: { type: integer, foreignTable: partner, foreignReference: id }
    views: integer
    plays: integer
    videos: integer
    audios: integer
    images: integer
    entries: integer    
    users_1: integer                    
    users_2: integer                        
    rc_1: integer                    
    rc_2: integer                        
    kshows_1: integer
    kshows_2: integer    
    created_at:
    updated_at:
    custom_data : longvarchar
    widgets: integer

    _indexes:
      partner_id_index: [partner_id]
  
  partner_activity:
    _attribute: { phpName : partnerActivity }
    id:
    partner_id: { type: integer }
    activity_date : bu_date
    activity : integer
    sub_activity : integer
    amount : bigint 
    amount1 : bigint 
    amount2 : bigint 
    amount3 : integer 
    amount4 : integer 
    amount5 : integer 
    amount6 : integer 
    amount7 : integer 
    amount9 : integer 

    _indexes:
      partner_id_index: [partner_id]
      
  conversion_profile:
    _attribute: { phpName : conversionProfile }
    id:     
    partner_id: { type: integer , default: 0 }
    enabled: tinyint
    name: varchar(128)
    profile_type: varchar(128)
    commercial_transcoder: tinyint
    width: integer
    height: integer
    aspect_ratio: varchar(6)
    bypass_flv: tinyint
    use_with_bulk: tinyint
    created_at:
    updated_at:
    profile_type_suffix: varchar(32)

    _indexes:
      partner_id_index: [partner_id]
    
  conversion_params:
    _attribute: { phpName : conversionParams }
    id:     
    partner_id: { type: integer }
    enabled: tinyint
    name: varchar(128)
    profile_type: varchar(128)
    profile_type_index: integer   
    width: integer
    height: integer
    aspect_ratio: varchar(6)
    gop_size: integer
    bitrate: integer
    qscale: integer
    file_suffix: varchar(64)
    custom_data: varchar(4096)    
    created_at:
    updated_at:

    _indexes:
      partner_id_index: [partner_id]
        
  partner_transactions:
    _attribute:  { phpName : partnerTransactions }
    id:
    partner_id: { type: integer }
    created_at:
    amount: float 
    currency: varchar(6)
    transaction_id: varchar(17)
    timestamp: timestamp
    correlation_id: varchar(12)
    ack: varchar(20)
    transaction_data: longvarchar
    
    _indexes:
       partner_id_index: [partner_id]
        
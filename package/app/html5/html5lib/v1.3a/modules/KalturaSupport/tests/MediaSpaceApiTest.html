<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>MediaSpace Api test</title>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<script type="text/javascript" src="../../../mwEmbedLoader.js"></script>

<script type="text/javascript">		
	if( document.URL.indexOf('forceMobileHTML5AndIframe' ) !== -1 ){
		mw.setConfig( 'EmbedPlayer.EnableIframeApi', true );
		mw.setConfig( 'Kaltura.IframeRewrite', true );
		mw.setConfig( 'forceMobileHTML5', true );
	}	
	function testOk( name ){		
		$('#resultLog').append( name + "::ok\n"  );
	};
	function jsCallbackReady(){
		testOk('jsCallbackReady');
	}
	function appendKalturaPlayer( target, entryId){
		// Embed video-player
		var flashvars = {
			entryId: entryId
		};
		var params = {
		    allowFullScreen: "true",
		    allowNetworking: "all",
		    allowScriptAccess: "always",
		    bgcolor: "#000000"
		};
		var attributes = {
		    id: "videoPlayer",
		    name: "videoPlayer"
		};
		
		var flashObj = swfobject.embedSWF("http://www.kaltura.com/index.php/kwidget/cache_st/1287024453/wid/_243342/uiconf_id/2877502", target, "400", "333", "10.0.0.0", "http://www.warnerbros.com/all/html/us/swf/expressinstall.swf", flashvars, params, attributes);
	}
	function runTests(){	
		// append a player ( without entry id )
		appendKalturaPlayer( "kdpHolder" );
		
		var kdp = $('#kaltura_player').get(0);
		window.kdpEmptyTest = function(){
			testOk('kdpEmpty');
		}
		kdp.addJsListener("kdpEmpty", kdpEmptyTest);
	}
	
</script>
</head>
<body>
<h2> Media space kdp API tests </h2>
<br />
	<a href="?forceMobileHTML5"> Force Mobile HTML5</a> for testing with desktop chrome and safari.	<br/>
	<a href="?forceMobileHTML5AndIframe"> Force Iframe HTML5</a> for testing iframe html5	<br/>	
	<a href="?forceIframe"> Force Universal Iframe </a> for testing  Universal Iframe ( will be flash gui for browsers with flash and html5 for browsers without flash<br/><br/>
	<a href="javascript:runTests()">Run tests</a>	<br></br>
	<textarea id="resultLog" cols='100' rows='10' ></textarea>
	<br></br>
<div id="kdpHolder">
	
</div>
</body>
</html>